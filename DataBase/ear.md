# 엔터티(Entity), 속성(Attribute), 관계(Relation)

## ERD 작성 순서
1. 엔터티를 그린다
2. 엔터티를 적절하게 배치한다.
3. 엔터티간 관계를 설정한다.
4. 관계명을 기술한다.
5. 관계의 참여도를 기술한다.
6. 관계의 필수여부를 기술한다.

## 엔터티
엔터티의 특징
- 반드시 해당 업무에 필요하고 관리하고자 하는 정보여야한다.
- 유일한 식별자에 의해 식별이 가능해야한다.
- 영속적으로 존재하는 인스턴스의 집합이어야 한다. (두 개 이상)
- 엔터티는 반드시 속성이 있어야 한다.
- 엔터티는 다른 엔터티와 최소 한 개 이상의 관계가 있어야 한다.

### 엔터티 종류

**기본 엔터티 (키 엔터티)**  
업무에 원래 존재하는 정보로서 다른 엔터티와의 관계에 의해 생성되지 않고 독립적으로 생성이 가능하다.  
  
자신은 타 엔터티의 부모 역할을 하게 된다. 다만 엔터티로부터 주식별자를 상속받지 않고 자신의 고유한 주식별자를 가지게 된다.  
  
예를 들어 사원,부서,고객,상품,자재 등이 기본 엔터티가 될 수 있다.
  
**중심 엔터티(메인 엔터티)**  
기본 엔터티로부터 발생, 업무에서 중심적인 역할을 한다.  
  
데이터의 양이 많이 발생되고 다른 엔터티와의 관계를 통해 많은 엔터티를 생성한다.  
  
예를 들어 계약, 사고, 예금원장, 청구, 주문, 매출 등이 중심 엔터티가 될 수 있다.
  
**행위 엔터티**  
두 개 이상의 부모엔터티로부터 발생되고 자주 내용이 바뀌거나 데이터량이 증가한다.  
  
분석초기 단계에서는 잘 나타나지 않으며 상세 설계단계나 프로세스와 상관 모델링을 진행하여 도출될 수 있다.  
  
예를 들어 주문목록, 사원변경이력등이 있다.

### 인터티, 인스턴스, 속성, 속성 값의 관계
- 한 개의 엔터티는 두 개 이상의 인스턴스의 집합이어야 한다.
- 한 개의 엔터티는 두 개 이상의 속성을 갖는다.
- 한 개의 속성은 한 개의 속성값을 갖는다.

ERD 그리는 꿀팁
- 가독성을 위해 가장 중요한 엔터티는 왼쪽 상단에서 조금 아래쪽에 베치 해 관계선을 그릴 때 선이 꼬이지 않고 효과적으로 배치 가능

<br>

## 속성
각 속성은 가질 수 있는 범위가 있는데 이를 속성의 도메인이라고 한다.  
엔터티 내에서 속성에 대한 데이터타입과 크기 그리고 제약사항을 지정하는 것이다.

## 속성의 특징에 따른 분류

### 기본 속성 Basic Attribute
업무로부터 추출한 모든 속성이 여기에 해당되며 엔터티에 가장 일반적이고 많은 속성을 차지한다.  
  
코드성 데이터, 엔터티를 식별하기 위해 부여된 일련번호(설계속성), 그리고 다른 속성을 계산하거나 영향을 받아 생성된 속성(파생속성)을 제외한 모든 속성이 기본속성이다.  

### 설계 속성 Designed Attribute
업무상 필요한 데이터 이외에 데이터 모델링을 위해, 업무를 규칙화하기 위해 속성을 만들거나 변형하여 정의하는 속성

### 파생 속성 Derived Attribute
데이터를 조회할 때 빠른 성능을 할 수 있도록 하기 위해 원래 속성의 값을 계산하여 저장할 수 있도록 만든 속성

## 속성의 명칭 부여
- 해당업무에서 사용하는 이름을 부여
- 서술식 속성명은 사용하지 않는다.
- 약어 사용은 가급적 제한한다.
- 전체 데이터모델에서 유일성을 확보하는 것이 좋다.

<br>

## 관계 Relation
ERD에서는 존재적 관계와 행위에 의한 관계를 구분하지 않지만 클래스 다이어그램에서는 이것을 구분하여 연관관계와 의존관계로 표현한다.  
  
UML(Unified Modeling Language)에는 클래스 다이어그램의 관계 중 연관관계(Association)와 의존관계(Dependency)가 있고 이것은 실선과 점선의 표기법으로 다르게 표현이 된다.

### 관계의 표기법
- 관계명(Membership): 관계의 이름
- 관계차수(Cardinally): 1:1, 1:M, M:N
- 관계선택사양(Optionality): 필수관계, 선택관계

### 관계 읽기
- 기준 Source 엔터티를 한 개(One) 또는 각(Each)로 읽는다.
- 대상 Target 엔터티의 관계참여도, 즉 개수(하나, 하나 이상)을 읽는다.
- 관계선택사양과 관계명을 읽는다.

두 개의 엔터티 사이에서 관계를 도출할 때 체크 사항
- 두 개의 엔터티 사이에 관심있는 연관 규칙이 존재하는가?
- 두 개의 엔터티 사이에 정보의 조합이 발생되는가?
- 업무기술서, 장표에 관계연결에 대한 규칙이 서술되어 있는가?
- 업무기술서, 장표에 관계연결을 가능하게 하는 동사가 있는가?